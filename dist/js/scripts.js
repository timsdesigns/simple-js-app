(()=>{let e=localStorage.getItem("theme");null==e&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-bs-theme",e),(themeSwitch=document.getElementById("themeSwitcher")).checked="light"===e,themeSwitch.addEventListener("change",()=>{let e=themeSwitch.checked?"light":"dark";document.documentElement.setAttribute("data-bs-theme",e),localStorage.setItem("theme",e),console.log("localStorage.getItem('theme') set to:"+e)});let t=(()=>{let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150",l=t=>"object"==typeof t?e.push(t):reportError("Wrong data type added, try using an object."),n=()=>e,a=t=>e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))[0],d=t=>e.indexOf(a(t)),i=e=>{let t=document.querySelector(".pokemon-list"),l=document.createElement("div");l.className="col-custom col-6 col-sm-4 col-md-3 col-lg-2";let n=document.createElement("button");n.innerText=e.name,n.classList.add("btn","btn-primary","rounded-pill","text-white","my-2","fw-bold","px-3","btn-fixed-min-width"),l.appendChild(n),t.appendChild(l),n.classList.add("btn-primary"),n.setAttribute("data-bs-toggle","modal"),n.setAttribute("data-bs-target","#exampleModal"),r(n,e)},r=(e,t)=>e.addEventListener("click",()=>m(t)),s=()=>(f(),fetch(t).then(e=>e.json()).then(e=>e.results.forEach(e=>l({name:e.name,detailsUrl:e.url}))).catch(e=>console.error(e)).finally(()=>L())),o=e=>(f(e),fetch(e.detailsUrl).then(e=>e.json()).then(t=>{e.imgUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.moves=t.moves.map(e=>e.move.name).join(", "),e.types=t.types.map(e=>e.type.name).join(", ")}).catch(e=>console.error(e)).finally(()=>L())),c=(e,t,l=null)=>{document.querySelector(".modal-header");let n=document.querySelector(".modal-title"),a=document.querySelector(".modal-body");n.innerHTML="",a.innerHTML="";let d=document.createElement("h1");d.innerText=e,n.appendChild(d);let i=document.createElement("p");i.innerText=t;let r=[i];if(l){let s=document.createElement("div");s.appendChild(l),r.push(s)}r.forEach(e=>a.appendChild(e))},m=e=>{o(e).then(()=>{let t=document.createElement("ul");Object.keys(e).forEach(l=>{let n=document.createElement("li");n.classList.add("details-item","list-group-item","d-flex","align-items-center");let a=document.createElement("h3");if(a.classList.add("details-title"),a.innerText=l.includes("detailsUrl")?"source":l,n.appendChild(a),"name"!==l){if("imgUrl"===l){a.innerText="";let d=document.createElement("img");d.src=e[l],d.alt="image of pokemon",d.classList.add("details-content","text-center","text-justify"),n.appendChild(d)}else if("moves"===l){let i=document.createElement("div");i.classList.add("d-flex","justify-content-between","align-items-center","flex-grow-1"),i.appendChild(a);let r=document.createElement("a");r.href="#",r.classList.add("details-content","text-center","text-justify","mx-auto");let s=document.createElement("span");s.classList.add("badge","bg-primary","rounded-pill"),s.innerText=e[l].length,r.appendChild(s);let o=!0;r.addEventListener("click",t=>{t.preventDefault(),o?(s.classList.add("d-block"),s.classList.remove("rounded-pill"),s.classList.remove("badge"),s.innerText=e[l],o=!1):(s.innerText=e[l].length,s.classList.add("badge"),s.classList.add("rounded-pill"),o=!0)}),i.appendChild(r),n.appendChild(i)}else{let c=document.createElement("p");c.innerText=e[l],c.classList.add("details-content","text-center","text-justify","flex-grow-1"),n.appendChild(c)}t.appendChild(n)}}),c(e.name,"Details:",t)})},h=0,p=document.querySelector(".modal");if(null!=p){p.addEventListener("touchstart",e=>h=e.changedTouches[0].screenX),p.addEventListener("touchend",e=>u(e.changedTouches[0].screenX-h));let u=e=>{let t=d(document.querySelector(".modal-title").innerText),l=(t+1)%n().length,a=(t-1+n().length)%n().length;e>50?o(n()[a]).then(()=>m(n()[a])):e<-50&&o(n()[l]).then(()=>m(n()[l]))}}let g=document.querySelector('form[role="search"]');g.addEventListener("submit",e=>{e.preventDefault();let t=g.querySelector("input").value,l=d(t);-1!==l&&o(n()[l]).then(()=>{m(n()[l]);let e=new bootstrap.Modal(document.querySelector("#exampleModal"));e.show(),g.reset()})});let f=(e=null)=>{let t=e?Array.from(document.querySelectorAll("button")).find(t=>t.innerText===e.name):null,l=document.createElement("span");l.innerText="Loading...",l.id="loading-message",t?t.parentNode.appendChild(l):(l.id="loading-message_unspecific",document.createElement("p").appendChild(l))},L=()=>{let e=document.getElementById("loading-message");e&&e.remove()};return{add:l,getAll:n,find:a,findIndex:d,addListItem:i,LoadList:s,loadDetails:o}})();t.LoadList().then(()=>t.getAll().forEach(e=>t.addListItem(e)))})();